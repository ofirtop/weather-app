(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{37:function(e,t,a){e.exports=a(52)},42:function(e,t,a){},43:function(e,t,a){},52:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(19),c=a.n(i),o=(a(42),a(43),a(17)),s=function(){return n.a.createElement("nav",{className:"blue darken-2"},n.a.createElement("div",null,n.a.createElement(o.b,{to:"/",className:"left brand"},"iWeather"),n.a.createElement("ul",{className:"right nav-links"},n.a.createElement("li",null,n.a.createElement(o.c,{to:"/"},"Home")),n.a.createElement("li",null,n.a.createElement(o.c,{to:"/favorites"},"Favorites")))))},l=a(18),u=a(12),m=a(13),p=a(15),h=a(14),d=a(16),f=a(8),y=[{Version:1,Key:"215854",Type:"City",Rank:31,LocalizedName:"Tel Aviv",Country:{ID:"IL",LocalizedName:"Israel"},AdministrativeArea:{ID:"TA",LocalizedName:"Tel Aviv"}}],v=[{Version:1,Key:"215855",Type:"City",Rank:31,LocalizedName:"Madrid",Country:{ID:"IL",LocalizedName:"Israel"},AdministrativeArea:{ID:"TA",LocalizedName:"Tel Aviv"}}],I=[{Version:1,Key:"215856",Type:"City",Rank:31,LocalizedName:"Barcelona",Country:{ID:"IL",LocalizedName:"Israel"},AdministrativeArea:{ID:"TA",LocalizedName:"Tel Aviv"}}],E=[{Version:1,Key:"215857",Type:"City",Rank:31,LocalizedName:"Canbara",Country:{ID:"IL",LocalizedName:"Israel"},AdministrativeArea:{ID:"TA",LocalizedName:"Tel Aviv"}}],g=[{Version:1,Key:"215858",Type:"City",Rank:31,LocalizedName:"San Francisoco",Country:{ID:"IL",LocalizedName:"Israel"},AdministrativeArea:{ID:"TA",LocalizedName:"Tel Aviv"}}],w=[{Version:1,Key:"215859",Type:"City",Rank:31,LocalizedName:"Jerusalem",Country:{ID:"IL",LocalizedName:"Israel"},AdministrativeArea:{ID:"TA",LocalizedName:"Tel Aviv"}}],T=function(e){var t={countryName:y[0].Country.LocalizedName,cityId:y[0].Key,cityName:y[0].LocalizedName},a={countryName:v[0].Country.LocalizedName,cityId:v[0].Key,cityName:v[0].LocalizedName},r={countryName:I[0].Country.LocalizedName,cityId:I[0].Key,cityName:I[0].LocalizedName},n={countryName:E[0].Country.LocalizedName,cityId:E[0].Key,cityName:E[0].LocalizedName},i={countryName:g[0].Country.LocalizedName,cityId:g[0].Key,cityName:g[0].LocalizedName},c={countryName:w[0].Country.LocalizedName,cityId:w[0].Key,cityName:w[0].LocalizedName};switch(e){case"1":case"Tel Aviv":case"215854":return Promise.resolve(t);case"2":case"Madrid":case"215855":return Promise.resolve(a);case"3":case"Barcelona":case"215856":return Promise.resolve(r);case"4":case"Canbara":case"215857":return Promise.resolve(n);case"5":case"San Francisoco":case"215858":return Promise.resolve(i);case"6":case"Jerusalem":case"215859":default:return Promise.resolve(c)}},N={saveToStorage:b,loadFromStorage:O,formatTime:function(e){var t=new Date(e).getHours(),a=new Date(e).getMinutes(),r=new Date(e).getSeconds(),n=new Date(e).getDate(),i=new Date(e).getMonth()+1,c=new Date(e).getFullYear();return n+"/"+i+"/"+c+"  "+C(t)+":"+C(a)+":"+C(r)}};function b(e,t){var a=JSON.stringify(t);localStorage.setItem(e,a)}function O(e){var t=localStorage.getItem(e);if(t)return JSON.parse(t)}function C(e){return e<10?"0"+e:e}var D=function(e,t,a){return function(r,n){T(e).then(function(e){e.isFavorite=t,e.isCurrent=a,r({type:"SET_CITY_INFO",cityInfo:e})}).catch(function(e){r({type:"LOCATION_ERROR",error:e})})}},L=function(e){return{type:"TOGGLE_FAVORITE_STATUS",cityId:e}},F=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(n)))).state={cityName:""},a.handleChange=function(e){a.setState({cityName:e.target.value})},a.handleSubmit=function(e){e.preventDefault(),a.props.getCityInfo(a.state.cityName,!1,!0)},a}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return n.a.createElement("form",{onSubmit:this.handleSubmit,className:"container"},n.a.createElement("input",{type:"text",placeholder:"Search for weather location",onChange:this.handleChange}))}}]),t}(r.Component),A=Object(f.b)(null,function(e){return{getCityInfo:function(t,a,r){return e(D(t,a,r))}}})(F),j=function(e){var t=e.day,a=t.Day.Icon;a<10&&(a="0".concat(a));var r=t.Night.Icon;r<10&&(r="0".concat(r));var i="https://apidev.accuweather.com/developers/Media/Default/WeatherIcons/".concat(a,"-s.png"),c="https://apidev.accuweather.com/developers/Media/Default/WeatherIcons/".concat(r,"-s.png");return n.a.createElement("div",{className:"card week-day"},n.a.createElement("div",{className:"card-content"},n.a.createElement("div",{className:"card-title"},["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][new Date(t.Date).getDay()]),n.a.createElement("img",{src:i,title:e.day.Day.IconPhrase,alt:e.day.Day.IconPhrase}),n.a.createElement("p",null,"Max ",t.Temperature.Maximum.Value,t.Temperature.Maximum.Unit),n.a.createElement("hr",null),n.a.createElement("img",{src:c,title:e.day.Night.IconPhrase,alt:e.day.Night.IconPhrase}),n.a.createElement("p",null,"Min ",t.Temperature.Minimum.Value,t.Temperature.Minimum.Unit)))},W={Headline:{EffectiveDate:"2019-08-03T08:00:00+03:00",EffectiveEpochDate:1564808400,Severity:4,Text:"Pleasant this weekend",Category:"",EndDate:null,EndEpochDate:null,MobileLink:"http://m.accuweather.com/en/il/tel-aviv/215854/extended-weather-forecast/215854?lang=en-us",Link:"http://www.accuweather.com/en/il/tel-aviv/215854/daily-weather-forecast/215854?lang=en-us"},DailyForecasts:[{Date:"2019-07-31T07:00:00+03:00",EpochDate:1564545600,Temperature:{Minimum:{Value:177,Unit:"F",UnitType:18},Maximum:{Value:192,Unit:"F",UnitType:18}},Day:{Icon:1,IconPhrase:"Sunny",HasPrecipitation:!1},Night:{Icon:34,IconPhrase:"Mostly clear",HasPrecipitation:!1},Sources:["AccuWeather"],MobileLink:"http://m.accuweather.com/en/il/tel-aviv/215854/daily-weather-forecast/215854?day=1&lang=en-us",Link:"http://www.accuweather.com/en/il/tel-aviv/215854/daily-weather-forecast/215854?day=1&lang=en-us"},{Date:"2019-08-01T07:00:00+03:00",EpochDate:1564632e3,Temperature:{Minimum:{Value:78,Unit:"F",UnitType:18},Maximum:{Value:88,Unit:"F",UnitType:18}},Day:{Icon:2,IconPhrase:"Mostly sunny",HasPrecipitation:!1},Night:{Icon:35,IconPhrase:"Partly cloudy",HasPrecipitation:!1},Sources:["AccuWeather"],MobileLink:"http://m.accuweather.com/en/il/tel-aviv/215854/daily-weather-forecast/215854?day=2&lang=en-us",Link:"http://www.accuweather.com/en/il/tel-aviv/215854/daily-weather-forecast/215854?day=2&lang=en-us"},{Date:"2019-08-02T07:00:00+03:00",EpochDate:1564718400,Temperature:{Minimum:{Value:76,Unit:"F",UnitType:18},Maximum:{Value:89,Unit:"F",UnitType:18}},Day:{Icon:3,IconPhrase:"Partly sunny",HasPrecipitation:!1},Night:{Icon:34,IconPhrase:"Mostly clear",HasPrecipitation:!1},Sources:["AccuWeather"],MobileLink:"http://m.accuweather.com/en/il/tel-aviv/215854/daily-weather-forecast/215854?day=3&lang=en-us",Link:"http://www.accuweather.com/en/il/tel-aviv/215854/daily-weather-forecast/215854?day=3&lang=en-us"},{Date:"2019-08-03T07:00:00+03:00",EpochDate:1564804800,Temperature:{Minimum:{Value:79,Unit:"F",UnitType:18},Maximum:{Value:89,Unit:"F",UnitType:18}},Day:{Icon:2,IconPhrase:"Mostly sunny",HasPrecipitation:!1},Night:{Icon:35,IconPhrase:"Partly cloudy",HasPrecipitation:!1},Sources:["AccuWeather"],MobileLink:"http://m.accuweather.com/en/il/tel-aviv/215854/daily-weather-forecast/215854?day=4&lang=en-us",Link:"http://www.accuweather.com/en/il/tel-aviv/215854/daily-weather-forecast/215854?day=4&lang=en-us"},{Date:"2019-08-04T07:00:00+03:00",EpochDate:1564891200,Temperature:{Minimum:{Value:77,Unit:"F",UnitType:18},Maximum:{Value:90,Unit:"F",UnitType:18}},Day:{Icon:2,IconPhrase:"Mostly sunny",HasPrecipitation:!1},Night:{Icon:34,IconPhrase:"Mostly clear",HasPrecipitation:!1},Sources:["AccuWeather"],MobileLink:"http://m.accuweather.com/en/il/tel-aviv/215854/daily-weather-forecast/215854?day=5&lang=en-us",Link:"http://www.accuweather.com/en/il/tel-aviv/215854/daily-weather-forecast/215854?day=5&lang=en-us"}]},M=[{LocalObservationDateTime:"2019-08-02T10:01:00+03:00",EpochTime:1564729260,WeatherText:"Clouds and sun",WeatherIcon:4,HasPrecipitation:!1,PrecipitationType:null,IsDayTime:!0,Temperature:{Metric:{Value:30.1,Unit:"C",UnitType:17},Imperial:{Value:86,Unit:"F",UnitType:18}},MobileLink:"http://m.accuweather.com/en/il/tel-aviv/215854/current-weather/215854?lang=en-us",Link:"http://www.accuweather.com/en/il/tel-aviv/215854/current-weather/215854?lang=en-us"}],S=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Promise.resolve(W)},k=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e={isDayTime:M[0].IsDayTime,weatherIcon:M[0].WeatherIcon,weatherDescription:M[0].WeatherText,temperatureImperialVal:M[0].Temperature.Imperial.Value,temperatureImperialUnit:M[0].Temperature.Imperial.Unit,temperatureMetricVal:M[0].Temperature.Metric.Value,temperatureMetricUnit:M[0].Temperature.Metric.Unit};return Promise.resolve(e)},P=function(e,t){return function(a,r){k(e).then(function(r){r.cityId=e,r.isCurrent=t,a({type:"SET_WEATHER",weather:r})}).catch(function(e){a({type:"WEATHER_ERROR",error:e})})}},R=a(21),U=(a(49),function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(n)))).handleToggleFavorite=function(){var e=a._getCurrentCity(a.props.citiesInfo);a.props.toggleFavoriteStatus(e.cityId)},a}return Object(d.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.location.isFavoritesLoaded||this.props.loadFavoritesFromStorage();var t=this.props.match.params.cityId;if(t){var a=this.props.citiesInfo.find(function(e){return e.cityId===t});a&&this.props.getCityInfo(a.cityName,!0,!0)}if(!this.props.citiesInfo.find(function(e){return e.isCurrent})){var r=N.loadFromStorage("favorites");if(r){var n=r.find(function(t){return t===e.props.defaultCityName});this.props.getCityInfo(this.props.defaultCityName,!!n,!0)}else this.props.getCityInfo(this.props.defaultCityName,!1,!0)}}},{key:"componentDidUpdate",value:function(e,t){console.log("inside componentDidUpdate");var a=e.citiesInfo.filter(function(e){return void 0!==e&&!0===e.isCurrent}),r=this.props.citiesInfo.filter(function(e){return void 0!==e&&!0===e.isCurrent});!a.length&&r.length?(this.props.getForcast(r[0].cityId),this.props.getWeather(r[0].cityId,!0)):a.length&&r.length&&a[0].cityId!==r[0].cityId&&(this.props.getForcast(r[0].cityId),this.props.getWeather(r[0].cityId,!0)),e.locationError!==this.props.locationError&&""!==this.props.locationError&&Object(R.b)(this.props.locationError),e.weatherError!==this.props.weatherError&&""!==this.props.weatherError&&Object(R.b)(this.props.weatherError)}},{key:"_getCurrentCity",value:function(e){var t=e.filter(function(e){return e.isCurrent});return t.length?t[0]:null}},{key:"isCurrentFavorite",value:function(){var e=this.props.citiesInfo.find(function(e){return e.isCurrent});return!!e&&!!e.isFavorite}},{key:"render",value:function(){var e,t,a,r,i=this.props.currentWeather.filter(function(e){return e.isCurrent});i.length&&(t=i[0].weatherDescription,a=i[0].temperatureImperialVal,r=i[0].temperatureImperialUnit,(e=i[0].weatherIcon)<10&&(e="0".concat(e)));var c,o,s="https://apidev.accuweather.com/developers/Media/Default/WeatherIcons/".concat(e,"-s.png"),l=this.props.citiesInfo.find(function(e){return void 0!==e&&e.isCurrent});l&&(c=l.countryName,o=l.cityName);var u=this.props.forcast,m=this.props.forcastDescription,p=u?u.map(function(e,t){return n.a.createElement(j,{day:e,key:t})}):n.a.createElement("h4",null,"There is currently no forcast show"),h=this.isCurrentFavorite()?"Remove from Favorites":"Add to Favorites",d=this.isCurrentFavorite()?{color:"red"}:{color:"grey"};return n.a.createElement("div",{className:"container"},n.a.createElement(A,null),n.a.createElement("div",{className:"flex-space-between"},n.a.createElement("div",{className:"flex  "},n.a.createElement("img",{className:"large-image",src:s,title:t,alt:t}),n.a.createElement("div",{className:"flex-col"},n.a.createElement("div",null,o,", ",c),n.a.createElement("div",null,a,r))),n.a.createElement("div",{className:"flex centered"},n.a.createElement("i",{className:"small material-icons",style:d},"favorite"),n.a.createElement("button",{className:"btn toogle-fav blue darken-2",onClick:this.handleToggleFavorite},h))),n.a.createElement("div",{className:"center main-description"},t),n.a.createElement("ul",{className:"forcast-list"},p),n.a.createElement("p",{className:"center blue-text darken-2 secondary-description"},m))}}]),t}(r.Component)),z=Object(f.b)(function(e){return{citiesInfo:e.location.citiesInfo,defaultCityName:e.location.defaultCityName,isFavoritesLoaded:e.location.isFavoritesLoaded,favorites:e.location.favorites,forcast:e.weather.forcast,forcastDescription:e.weather.forcastDescription,currentWeather:e.weather.currentWeather,weatherError:e.weather.error,locationError:e.location.error}},function(e){return{getCityInfo:function(t,a,r){return e(D(t,a,r))},getForcast:function(t){e(function(e){return function(t,a){S(e).then(function(e){t({type:"SET_FORCAST",forcast:e})}).catch(function(e){t({type:"WEATHER_ERROR",error:e})})}}(t))},getWeather:function(t,a){e(P(t,a))},toggleFavoriteStatus:function(t){e(L(t))},loadFavoritesFromStorage:function(){e(function(e,t){var a=O("favorites");a||(a=[]),e({type:"LOAD_FAVORITES_FROM_STORAGE",favorites:a})})}}})(U),V=function(e){var t=e.composedInfo.cityInfo.cityName,a=e.composedInfo.cityInfo.cityId,r=e.composedInfo.cityInfo.countryName,i=e.composedInfo.currentWeather.temperatureImperialUnit,c=e.composedInfo.currentWeather.temperatureImperialVal,s=e.composedInfo.currentWeather.weatherDescription,l=e.composedInfo.currentWeather.weatherIcon;l<10&&(l="0".concat(l));var u="https://apidev.accuweather.com/developers/Media/Default/WeatherIcons/".concat(l,"-s.png");return n.a.createElement(o.b,{to:"/"+a},n.a.createElement("div",{className:"card"},n.a.createElement("div",{className:"card-content"},n.a.createElement("div",null,t,", ",r),n.a.createElement("div",null,c,", ",i),n.a.createElement("img",{src:u,title:s,alt:s}),n.a.createElement("div",null,s))))},_=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=[];this.props.citiesInfo.length&&this.props.citiesInfo.forEach(function(a){e.props.currentWeather.length&&e.props.currentWeather.forEach(function(e){e.cityId===a.cityId&&a.isFavorite&&t.push({cityInfo:a,currentWeather:e})})});var a=t.length?t.map(function(e,t){return n.a.createElement(V,{composedInfo:e,key:t})}):n.a.createElement("div",{className:""},"No Favorites Selected ");return n.a.createElement("ul",{className:"forcast-list center"},a)}}]),t}(r.Component),x=Object(f.b)(function(e){return{citiesInfo:e.location.citiesInfo,currentWeather:e.weather.currentWeather}})(_),H=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.favorites&&this.props.favorites.forEach(function(t){var a=e.props.citiesInfo.find(function(e){return e.cityName===t});a?(L(t),e.props.getWeather(a.cityId,a.isCurrent)):e.props.getCityInfo(t,!0,!1)})}},{key:"componentDidUpdate",value:function(e,t){var a=this;this.props.citiesInfo.forEach(function(e){a.props.favorites.find(function(t){return e.cityName===t})&&(a.props.weather&&a.props.weather.currentWeather.find(function(t){return t.cityId===e.cityId})||a.props.getWeather(e.cityId,e.isCurrent))})}},{key:"render",value:function(){return n.a.createElement("div",{className:"container"},n.a.createElement(x,null))}}]),t}(r.Component),K=Object(f.b)(function(e){return{citiesInfo:e.location.citiesInfo,favorites:e.location.favorites,currentWeather:e.location.currentWeather}},function(e){return{getCityInfo:function(t,a,r){return e(D(t,a,r))},getWeather:function(t,a){e(P(t,a))},toggleFavoriteStatus:function(t){e(L(t))}}})(H);var G=function(){return n.a.createElement(o.a,null,n.a.createElement(R.a,null),n.a.createElement("div",{className:"App"},n.a.createElement(s,null),n.a.createElement(l.c,null,n.a.createElement(l.a,{exact:!0,path:"/",component:z}),n.a.createElement(l.a,{path:"/favorites",component:K}),n.a.createElement(l.a,{path:"/:cityId",component:z}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var J=a(9),B=a(5),Y=a(7),$={favorites:[],isFavoritesLoaded:!1,citiesInfo:[],defaultCityName:"Tel Aviv",error:""},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_FAVORITES_FROM_STORAGE":return Object(Y.a)({},e,{isFavoritesLoaded:!0,favorites:t.favorites,error:""});case"SET_CITY_INFO":var a=Object(B.a)(e.citiesInfo);t.cityInfo.isCurrent&&a.forEach(function(e){return e.isCurrent=!1});var r=a.find(function(e){return e.cityId===t.cityInfo.cityId});return r?(r.isCurrent=t.cityInfo.isCurrent,Object(Y.a)({},e,{citiesInfo:Object(B.a)(a),error:""})):Object(Y.a)({},e,{citiesInfo:[].concat(Object(B.a)(a),[t.cityInfo]),error:""});case"TOGGLE_FAVORITE_STATUS":var n=Object(B.a)(e.citiesInfo),i=n.find(function(e){return e.cityId===t.cityId});i.isFavorite=!i.isFavorite;var c=Object(B.a)(e.favorites),o=c.indexOf(i.cityName);return i.isFavorite?o<0&&(c=[].concat(Object(B.a)(c),[i.cityName])):o>=0&&c.splice(o,1),b("favorites",c),Object(Y.a)({},e,{favorites:c,citiesInfo:Object(B.a)(n),error:""});case"LOCATION_ERROR":return Object(Y.a)({},e,{error:t.error});default:return e}},Q={forcast:[],forcastDescription:"",currentWeather:[],error:""},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FORCAST":return Object(Y.a)({},e,{forcast:t.forcast.DailyForecasts,forcastDescription:t.forcast.Headline.Text,error:""});case"SET_WEATHER":var a=Object(B.a)(e.currentWeather),r=!1,n=a.map(function(e){return e.cityId===t.weather.cityId?(r=!0,t.weather):e});return r?Object(Y.a)({},e,{currentWeather:Object(B.a)(n),error:""}):Object(Y.a)({},e,{currentWeather:[].concat(Object(B.a)(e.currentWeather),[t.weather]),error:""});case"WEATHER_ERROR":return Object(Y.a)({},e,{error:t.error});default:return e}},Z=Object(J.combineReducers)({weather:X,location:q}),ee=a(35),te=a(36),ae=Object(J.createStore)(Z,Object(J.compose)(Object(J.applyMiddleware)(ee.a),Object(te.composeWithDevTools)()));c.a.render(n.a.createElement(f.a,{store:ae},n.a.createElement(G,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[37,1,2]]]);
//# sourceMappingURL=main.f1ca0d71.chunk.js.map