(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{47:function(e,t,r){e.exports=r(80)},52:function(e,t,r){},53:function(e,t,r){},80:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),c=r(20),i=r.n(c),o=(r(52),r(53),r(18)),s=function(e){return n.a.createElement("nav",{className:"blue darken-2"},n.a.createElement("div",{className:"border-black"},n.a.createElement(o.b,{to:"/",className:"left brand"},"iWeather"),n.a.createElement("ul",{className:"right nav-links"},n.a.createElement("li",null,n.a.createElement(o.c,{to:"/"},"Home")),n.a.createElement("li",null,n.a.createElement(o.c,{to:"/favorites"},"Favorites")))))},l=r(19),u=r(12),h=r(13),f=r(16),m=r(14),p=r(17),d=r(9),v=r(22),g=r.n(v),y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"215854",t=(arguments.length>1&&arguments[1],"".concat("https://dataservice.accuweather.com/forecasts/v1/daily/5day/").concat(e,"?apikey=").concat("gQ307OUWQ0rbqOqwiGr85Z3JDQBtEEII"," "));return g.a.get(t).then(function(e){return e.data}).catch(function(e){return console.log(e)})},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"215854",t="".concat("https://dataservice.accuweather.com/currentconditions/v1/").concat(e,"?apikey=").concat("gQ307OUWQ0rbqOqwiGr85Z3JDQBtEEII"," ");return g.a.get(t).then(function(e){return{isDayTime:e.data[0].IsDayTime,weatherIcon:e.data[0].WeatherIcon,weatherDescription:e.data[0].WeatherText,temperatureImperialVal:e.data[0].Temperature.Imperial.Value,temperatureImperialUnit:e.data[0].Temperature.Imperial.Unit,temperatureMetricVal:e.data[0].Temperature.Metric.Value,temperatureMetricUnit:e.data[0].Temperature.Metric.Unit}}).catch(function(e){return console.log(e)})},I=function(e,t){return function(r,a){E(e).then(function(a){a.cityId=e,a.isCurrent=t,r({type:"SET_WEATHER",weather:a})}).catch(function(e){r({type:"WEATHER_ERROR",error:e})})}},O=function(e){var t="".concat("https://dataservice.accuweather.com/locations/v1/cities/autocomplete","?apikey=").concat("gQ307OUWQ0rbqOqwiGr85Z3JDQBtEEII","&q=").concat(e," ");return g.a.get(t).then(function(e){return{cityId:e.data[0].Key,cityName:e.data[0].LocalizedName}}).catch(function(e){return console.log(e)})},b={saveToStorage:T,loadFromStorage:C,formatTime:function(e){var t=new Date(e).getHours(),r=new Date(e).getMinutes(),a=new Date(e).getSeconds(),n=new Date(e).getDate(),c=new Date(e).getMonth()+1,i=new Date(e).getFullYear();return n+"/"+c+"/"+i+"  "+N(t)+":"+N(r)+":"+N(a)}};function T(e,t){var r=JSON.stringify(t);localStorage.setItem(e,r)}function C(e){var t=localStorage.getItem(e);if(t)return JSON.parse(t)}function N(e){return e<10?"0"+e:e}var w=function(e,t,r){return function(a,n){O(e).then(function(n){n.isFavorite=t,n.isCurrent=r,a("Madrid"===e?{type:"LOCATION_ERROR",error:e}:{type:"SET_CITY_INFO",cityInfo:n})}).catch(function(e){a({type:"LOCATION_ERROR",error:e})})}},S=function(e){return{type:"TOGGLE_FAVORITE_STATUS",cityId:e}},j=(r(76),r(25)),F=function(e){function t(){var e,r;Object(u.a)(this,t);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(r=Object(f.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(n)))).state={cityName:""},r.handleChange=function(e){r.setState({cityName:e.target.value})},r.handleSubmit=function(e){e.preventDefault(),r.props.getCityInfo(r.state.cityName,!1,!0)},r}return Object(p.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return n.a.createElement("form",{onSubmit:this.handleSubmit,className:"container filter-container"},n.a.createElement("input",{type:"text",placeholder:"Search for weather location",onChange:this.handleChange}))}}]),t}(a.Component),W=Object(d.b)(null,function(e){return{getCityInfo:function(t,r,a){return e(w(t,r,a))}}})(F),D=function(e){var t=e.day,r=t.Temperature.Maximum.Value,a=Math.round(p(t.Temperature.Maximum.Value)),c=t.Temperature.Minimum.Value,i=Math.round(p(t.Temperature.Minimum.Value)),o=t.Temperature.Maximum.Unit,s=t.Day.Icon;s<10&&(s="0".concat(s));var l=t.Night.Icon;l<10&&(l="0".concat(l));var u="https://apidev.accuweather.com/developers/Media/Default/WeatherIcons/".concat(s,"-s.png"),h="https://apidev.accuweather.com/developers/Media/Default/WeatherIcons/".concat(l,"-s.png"),f="c"===e.scale?"hide":"",m="c"!==e.scale?"hide":"";function p(e){return 5/9*(e-32)}return n.a.createElement("div",{className:"card week-day"},n.a.createElement("div",{className:"card-content"},n.a.createElement("div",{className:"card-title"},["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][new Date(t.Date).getDay()]),n.a.createElement("img",{src:u,title:e.day.Day.IconPhrase,alt:e.day.Day.IconPhrase}),n.a.createElement("p",{className:f},"Max ",r,o),n.a.createElement("p",{className:m},"Max ",a,"C"),n.a.createElement("hr",null),n.a.createElement("img",{src:h,title:e.day.Night.IconPhrase,alt:e.day.Night.IconPhrase}),n.a.createElement("p",{className:f},"Min ",c,o),n.a.createElement("p",{className:m},"Min ",i,"C")))},k=function(e){function t(){var e,r;Object(u.a)(this,t);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(r=Object(f.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(n)))).handleToggleFavorite=function(){var e=r._getCurrentCity(r.props.citiesInfo);r.props.toggleFavoriteStatus(e.cityId)},r.handleToggleScale=function(){r.props.toggleScale()},r.handleToggleTheme=function(){r.props.toggleTheme()},r}return Object(p.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.location.isFavoritesLoaded||this.props.loadFavoritesFromStorage();var t=this.props.match.params.cityId;if(t){var r=this.props.citiesInfo.find(function(e){return e.cityId===t});r&&this.props.getCityInfo(r.cityName,!0,!0)}if(!this.props.citiesInfo.find(function(e){return e.isCurrent})){var a=b.loadFromStorage("favorites");if(a){var n=a.find(function(t){return t===e.props.defaultCityName});this.props.getCityInfo(this.props.defaultCityName,!!n,!0)}else this.props.getCityInfo(this.props.defaultCityName,!1,!0)}}},{key:"componentDidUpdate",value:function(e,t){var r=e.citiesInfo.filter(function(e){return void 0!==e&&!0===e.isCurrent}),a=this.props.citiesInfo.filter(function(e){return void 0!==e&&!0===e.isCurrent});!r.length&&a.length?(this.props.getForcast(a[0].cityId),this.props.getWeather(a[0].cityId,!0)):r.length&&a.length&&r[0].cityId!==a[0].cityId&&(this.props.getForcast(a[0].cityId),this.props.getWeather(a[0].cityId,!0)),e.locationError!==this.props.locationError&&""!==this.props.locationError&&this.notify(this.props.locationError),e.weatherError!==this.props.weatherError&&""!==this.props.weatherError&&this.notify(this.props.weatherError)}},{key:"_getCurrentCity",value:function(e){var t=e.filter(function(e){return e.isCurrent});return t.length?t[0]:null}},{key:"isCurrentFavorite",value:function(){var e=this.props.citiesInfo.find(function(e){return e.isCurrent});return!!e&&!!e.isFavorite}},{key:"isCurrentCelsius",value:function(){return"c"===this.props.scale}},{key:"notify",value:function(e){Object(j.b)(e)}},{key:"render",value:function(){var e,t,r,a,c,i,o=this,s=this.props.currentWeather.filter(function(e){return e.isCurrent});s.length&&(t=s[0].weatherDescription,r=s[0].temperatureImperialVal,a=s[0].temperatureImperialUnit,i=s[0].temperatureMetricVal,c=s[0].temperatureMetricUnit,(e=s[0].weatherIcon)<10&&(e="0".concat(e)));var l,u,h="https://apidev.accuweather.com/developers/Media/Default/WeatherIcons/".concat(e,"-s.png"),f=this.props.citiesInfo.find(function(e){return void 0!==e&&e.isCurrent});f&&(l=f.countryName,u=f.cityName);var m=this.props.forcast,p=this.props.forcastDescription,d=m?m.map(function(e,t){return n.a.createElement(D,{scale:o.props.scale,day:e,key:t})}):n.a.createElement("h4",null,"There is currently no forcast show"),v=this.isCurrentCelsius()?"hide":"",g=this.isCurrentCelsius()?"":"hide",y=this.isCurrentCelsius()?"F":"C",E=this.isCurrentFavorite()?"Remove Favorite":"Add to Favorites",I=this.isCurrentFavorite()?{color:"red"}:{color:"grey"},O="light"===this.props.theme?"D":"L",b="light"===this.props.theme?"main-container":"main-container-dark",T="light"===this.props.theme?{color:"black"}:{color:"white"};return n.a.createElement("div",{className:b},n.a.createElement(W,null),n.a.createElement("div",{className:"flex-space-between"},n.a.createElement("div",{className:"flex curr-city"},n.a.createElement("img",{className:"large-image",src:h,title:t,alt:t}),n.a.createElement("div",{className:"flex-col"},n.a.createElement("div",{style:T},u,", ",l),n.a.createElement("div",{className:v,style:T},r,a),n.a.createElement("div",{className:g,style:T},i,c))),n.a.createElement("div",{className:"flex centered add-fav"},n.a.createElement("i",{className:"small material-icons",style:I},"favorite"),n.a.createElement("button",{className:"btn toggle-fav blue darken-2",onClick:this.handleToggleFavorite},E),n.a.createElement("div",{className:"right setting-action"},n.a.createElement("button",{className:"btn toggle-setting blue darken-2",title:"Temperature System [Fahrenheit \\ Celsius]",onClick:this.handleToggleScale},y),n.a.createElement("button",{className:"btn toggle-setting blue darken-2",title:"Change Theme [Dark \\ Light]",onClick:this.handleToggleTheme},O)))),n.a.createElement("div",{style:T,className:"center main-description"},t),n.a.createElement("ul",{className:"forcast-list"},d),n.a.createElement("p",{className:"center blue-text darken-2 secondary-description"},p))}}]),t}(a.Component),R=Object(d.b)(function(e){return{citiesInfo:e.location.citiesInfo,defaultCityName:e.location.defaultCityName,isFavoritesLoaded:e.location.isFavoritesLoaded,favorites:e.location.favorites,forcast:e.weather.forcast,forcastDescription:e.weather.forcastDescription,currentWeather:e.weather.currentWeather,weatherError:e.weather.error,locationError:e.location.error,scale:e.setting.currentScale,theme:e.setting.currentTheme}},function(e){return{getCityInfo:function(t,r,a){return e(w(t,r,a))},getForcast:function(t){e(function(e){return function(t,r){y(e,t).then(function(e){t({type:"SET_FORCAST",forcast:e})}).catch(function(e){t({type:"WEATHER_ERROR",error:e})})}}(t))},getWeather:function(t,r){e(I(t,r))},toggleFavoriteStatus:function(t){e(S(t))},toggleScale:function(){e({type:"TOGGLE_SCALE"})},toggleTheme:function(){e({type:"TOGGLE_THEME"})},loadFavoritesFromStorage:function(){e(function(e,t){var r=C("favorites");r||(r=[]),e({type:"LOAD_FAVORITES_FROM_STORAGE",favorites:r})})}}})(k),M=function(e){var t=e.composedInfo.cityInfo.cityName,r=e.composedInfo.cityInfo.cityId,a=e.composedInfo.cityInfo.countryName,c=e.composedInfo.currentWeather.temperatureImperialVal,i=Math.round(5/9*(c-5/9*32-32)),s=e.composedInfo.currentWeather.temperatureImperialUnit,l=e.composedInfo.currentWeather.weatherDescription,u=e.composedInfo.currentWeather.weatherIcon;u<10&&(u="0".concat(u));var h="https://apidev.accuweather.com/developers/Media/Default/WeatherIcons/".concat(u,"-s.png"),f="c"===e.scale?"hide":"",m="c"!==e.scale?"hide":"";return n.a.createElement(o.b,{to:"/"+r},n.a.createElement("div",{className:"card"},n.a.createElement("div",{className:"card-content"},n.a.createElement("div",null,t,", ",a),n.a.createElement("div",{className:f},c,s),n.a.createElement("div",{className:m},i,"C"),n.a.createElement("img",{src:h,title:l,alt:l}),n.a.createElement("div",null,l))))},_=function(e){function t(){return Object(u.a)(this,t),Object(f.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=[];this.props.citiesInfo.length&&this.props.citiesInfo.forEach(function(r){e.props.currentWeather.length&&e.props.currentWeather.forEach(function(e){e.cityId===r.cityId&&r.isFavorite&&t.push({cityInfo:r,currentWeather:e})})});var r=t.length?t.map(function(t,r){return n.a.createElement(M,{scale:e.props.scale,composedInfo:t,key:r})}):n.a.createElement("div",{className:""},"No Favorites Selected ");return n.a.createElement("ul",{className:"forcast-list center"},r)}}]),t}(a.Component),A=Object(d.b)(function(e){return{citiesInfo:e.location.citiesInfo,currentWeather:e.weather.currentWeather,scale:e.setting.currentScale}})(_),L=function(e){function t(){return Object(u.a)(this,t),Object(f.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.favorites&&this.props.favorites.forEach(function(t){var r=e.props.citiesInfo.find(function(e){return e.cityName===t});r?(S(t),e.props.getWeather(r.cityId,r.isCurrent)):e.props.getCityInfo(t,!0,!1)})}},{key:"componentDidUpdate",value:function(e,t){var r=this;this.props.citiesInfo.forEach(function(e){r.props.favorites.find(function(t){return e.cityName===t})&&(r.props.weather&&r.props.weather.currentWeather.find(function(t){return t.cityId===e.cityId})||r.props.getWeather(e.cityId,e.isCurrent))})}},{key:"render",value:function(){var e="light"===this.props.theme?"max-container":"max-container-dark";return n.a.createElement("div",{className:e},n.a.createElement(A,null))}}]),t}(a.Component),x=Object(d.b)(function(e){return{citiesInfo:e.location.citiesInfo,favorites:e.location.favorites,currentWeather:e.location.currentWeather,theme:e.setting.currentTheme}},function(e){return{getCityInfo:function(t,r,a){return e(w(t,r,a))},getWeather:function(t,r){e(I(t,r))},toggleFavoriteStatus:function(t){e(S(t))}}})(L);r(79);var G=function(){return n.a.createElement(o.a,{basename:"/weather-app"},n.a.createElement(j.a,null),n.a.createElement("div",{className:"App"},n.a.createElement(s,null),n.a.createElement(l.c,null,n.a.createElement(l.a,{exact:!0,path:"/",component:R}),n.a.createElement(l.a,{path:"/favorites",component:x}),n.a.createElement(l.a,{path:"/:cityId",component:R}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var U=r(15),V=r(7),H=r(4),J={favorites:[],isFavoritesLoaded:!1,citiesInfo:[],defaultCityName:"Tel Aviv",error:""},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_FAVORITES_FROM_STORAGE":return Object(H.a)({},e,{isFavoritesLoaded:!0,favorites:t.favorites,error:""});case"SET_CITY_INFO":var r=Object(V.a)(e.citiesInfo);t.cityInfo.isCurrent&&r.forEach(function(e){return e.isCurrent=!1});var a=r.find(function(e){return e.cityId===t.cityInfo.cityId});return a?(a.isCurrent=t.cityInfo.isCurrent,Object(H.a)({},e,{citiesInfo:Object(V.a)(r),error:""})):Object(H.a)({},e,{citiesInfo:[].concat(Object(V.a)(r),[t.cityInfo]),error:""});case"TOGGLE_FAVORITE_STATUS":var n=Object(V.a)(e.citiesInfo),c=n.find(function(e){return e.cityId===t.cityId});c.isFavorite=!c.isFavorite;var i=Object(V.a)(e.favorites),o=i.indexOf(c.cityName);return c.isFavorite?o<0&&(i=[].concat(Object(V.a)(i),[c.cityName])):o>=0&&i.splice(o,1),T("favorites",i),Object(H.a)({},e,{favorites:i,citiesInfo:Object(V.a)(n),error:""});case"LOCATION_ERROR":return Object(H.a)({},e,{error:JSON.stringify(t.error)});default:return e}},q={forcast:[],forcastDescription:"",currentWeather:[],error:""},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FORCAST":return Object(H.a)({},e,{forcast:t.forcast.DailyForecasts,forcastDescription:t.forcast.Headline.Text,error:""});case"SET_WEATHER":var r=Object(V.a)(e.currentWeather),a=!1,n=r.map(function(e){return e.cityId===t.weather.cityId?(a=!0,t.weather):e});return a?Object(H.a)({},e,{currentWeather:Object(V.a)(n),error:""}):Object(H.a)({},e,{currentWeather:[].concat(Object(V.a)(e.currentWeather),[t.weather]),error:""});case"WEATHER_ERROR":return Object(H.a)({},e,{error:JSON.stringify(t.error)});default:return e}},P={currentScale:"c",currentTheme:"light",error:""},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P;switch((arguments.length>1?arguments[1]:void 0).type){case"TOGGLE_SCALE":var t="f"===e.currentScale?"c":"f";return Object(H.a)({},e,{currentScale:t});case"TOGGLE_THEME":var r="light"===e.currentTheme?"dark":"light";return Object(H.a)({},e,{currentTheme:r});default:return e}},Z=Object(U.combineReducers)({weather:B,location:Q,setting:Y}),z=r(45),K=r(46),$=Object(U.createStore)(Z,Object(K.composeWithDevTools)(Object(U.applyMiddleware)(z.a)));i.a.render(n.a.createElement(d.a,{store:$},n.a.createElement(G,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[47,1,2]]]);
//# sourceMappingURL=main.af84ce8e.chunk.js.map