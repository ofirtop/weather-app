(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{47:function(e,t,r){e.exports=r(79)},52:function(e,t,r){},53:function(e,t,r){},79:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),c=r(20),o=r.n(c),i=(r(52),r(53),r(18)),s=function(){return n.a.createElement("nav",{className:"blue darken-2"},n.a.createElement("div",null,n.a.createElement(i.b,{to:"/",className:"left brand"},"iWeather"),n.a.createElement("ul",{className:"right nav-links"},n.a.createElement("li",null,n.a.createElement(i.c,{to:"/"},"Home")),n.a.createElement("li",null,n.a.createElement(i.c,{to:"/favorites"},"Favorites")))))},u=r(19),l=r(13),f=r(14),p=r(16),m=r(15),h=r(17),d=r(9),v=r(22),y=r.n(v),I={getCityInfoByName:E},E=function(e){var t="".concat("http://dataservice.accuweather.com/locations/v1/cities/autocomplete","?apikey=").concat("gQ307OUWQ0rbqOqwiGr85Z3JDQBtEEII","&q=").concat(e," ");return y.a.get(t).then(function(e){return{cityId:e.data[0].Key,cityName:e.data[0].LocalizedName}}).catch(function(e){return e})},g={saveToStorage:O,loadFromStorage:b,formatTime:function(e){var t=new Date(e).getHours(),r=new Date(e).getMinutes(),a=new Date(e).getSeconds(),n=new Date(e).getDate(),c=new Date(e).getMonth()+1,o=new Date(e).getFullYear();return n+"/"+c+"/"+o+"  "+w(t)+":"+w(r)+":"+w(a)}};function O(e,t){var r=JSON.stringify(t);localStorage.setItem(e,r)}function b(e){var t=localStorage.getItem(e);if(t)return JSON.parse(t)}function w(e){return e<10?"0"+e:e}var N=function(e,t,r){return function(a,n){I.getCityInfoByName(e).then(function(e){e.isFavorite=t,e.isCurrent=r,a({type:"SET_CITY_INFO",cityInfo:e})}).catch(function(e){a({type:"LOCATION_ERROR",error:e})})}},C=function(e){return{type:"TOGGLE_FAVORITE_STATUS",cityId:e}},j=function(e){function t(){var e,r;Object(l.a)(this,t);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(r=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(n)))).state={cityName:""},r.handleChange=function(e){r.setState({cityName:e.target.value})},r.handleSubmit=function(e){e.preventDefault(),r.props.getCityInfo(r.state.cityName,!1,!0)},r}return Object(h.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return n.a.createElement("form",{onSubmit:this.handleSubmit,className:"container"},n.a.createElement("input",{type:"text",placeholder:"Search for weather location",onChange:this.handleChange}))}}]),t}(a.Component),T=Object(d.b)(null,function(e){return{getCityInfo:function(t,r,a){return e(N(t,r,a))}}})(j),F=function(e){var t=e.day,r=t.Day.Icon;r<10&&(r="0".concat(r));var a=t.Night.Icon;a<10&&(a="0".concat(a));var c="https://apidev.accuweather.com/developers/Media/Default/WeatherIcons/".concat(r,"-s.png"),o="https://apidev.accuweather.com/developers/Media/Default/WeatherIcons/".concat(a,"-s.png");return n.a.createElement("div",{className:"card week-day"},n.a.createElement("div",{className:"card-content"},n.a.createElement("div",{className:"card-title"},["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][new Date(t.Date).getDay()]),n.a.createElement("img",{src:c,title:e.day.Day.IconPhrase,alt:e.day.Day.IconPhrase}),n.a.createElement("p",null,"Max ",t.Temperature.Maximum.Value,t.Temperature.Maximum.Unit),n.a.createElement("hr",null),n.a.createElement("img",{src:o,title:e.day.Night.IconPhrase,alt:e.day.Night.IconPhrase}),n.a.createElement("p",null,"Min ",t.Temperature.Minimum.Value,t.Temperature.Minimum.Unit)))},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"215854",t="".concat("http://dataservice.accuweather.com/forecasts/v1/daily/5day/").concat(e,"?apikey=").concat("gQ307OUWQ0rbqOqwiGr85Z3JDQBtEEII"," ");return y.a.get(t).then(function(e){return e.data}).catch(function(e){})},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"215854",t="".concat("http://dataservice.accuweather.com/currentconditions/v1/").concat(e,"?apikey=").concat("gQ307OUWQ0rbqOqwiGr85Z3JDQBtEEII"," ");return y.a.get(t).then(function(e){return{isDayTime:e.data[0].IsDayTime,weatherIcon:e.data[0].WeatherIcon,weatherDescription:e.data[0].WeatherText,temperatureImperialVal:e.data[0].Temperature.Imperial.Value,temperatureImperialUnit:e.data[0].Temperature.Imperial.Unit,temperatureMetricVal:e.data[0].Temperature.Metric.Value,temperatureMetricUnit:e.data[0].Temperature.Metric.Unit}}).catch(function(e){return e})},S=function(e,t){return function(r,a){D(e).then(function(a){a.cityId=e,a.isCurrent=t,r({type:"SET_WEATHER",weather:a})}).catch(function(e){r({type:"WEATHER_ERROR",error:e})})}},R=r(23),k=(r(76),function(e){function t(){var e,r;Object(l.a)(this,t);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(r=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(n)))).handleToggleFavorite=function(){var e=r._getCurrentCity(r.props.citiesInfo);r.props.toggleFavoriteStatus(e.cityId)},r}return Object(h.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.location.isFavoritesLoaded||this.props.loadFavoritesFromStorage();var t=this.props.match.params.cityId;if(t){var r=this.props.citiesInfo.find(function(e){return e.cityId===t});r&&this.props.getCityInfo(r.cityName,!0,!0)}if(!this.props.citiesInfo.find(function(e){return e.isCurrent})){var a=g.loadFromStorage("favorites");if(a){var n=a.find(function(t){return t===e.props.defaultCityName});this.props.getCityInfo(this.props.defaultCityName,!!n,!0)}else this.props.getCityInfo(this.props.defaultCityName,!1,!0)}}},{key:"componentDidUpdate",value:function(e,t){console.log("inside componentDidUpdate");var r=e.citiesInfo.filter(function(e){return void 0!==e&&!0===e.isCurrent}),a=this.props.citiesInfo.filter(function(e){return void 0!==e&&!0===e.isCurrent});!r.length&&a.length?(this.props.getForcast(a[0].cityId),this.props.getWeather(a[0].cityId,!0)):r.length&&a.length&&r[0].cityId!==a[0].cityId&&(this.props.getForcast(a[0].cityId),this.props.getWeather(a[0].cityId,!0)),e.locationError!==this.props.locationError&&""!==this.props.locationError&&Object(R.b)(this.props.locationError),e.weatherError!==this.props.weatherError&&""!==this.props.weatherError&&Object(R.b)(this.props.weatherError)}},{key:"_getCurrentCity",value:function(e){var t=e.filter(function(e){return e.isCurrent});return t.length?t[0]:null}},{key:"isCurrentFavorite",value:function(){var e=this.props.citiesInfo.find(function(e){return e.isCurrent});return!!e&&!!e.isFavorite}},{key:"render",value:function(){var e,t,r,a,c=this.props.currentWeather.filter(function(e){return e.isCurrent});c.length&&(t=c[0].weatherDescription,r=c[0].temperatureImperialVal,a=c[0].temperatureImperialUnit,(e=c[0].weatherIcon)<10&&(e="0".concat(e)));var o,i,s="https://apidev.accuweather.com/developers/Media/Default/WeatherIcons/".concat(e,"-s.png"),u=this.props.citiesInfo.find(function(e){return void 0!==e&&e.isCurrent});u&&(o=u.countryName,i=u.cityName);var l=this.props.forcast,f=this.props.forcastDescription,p=l?l.map(function(e,t){return n.a.createElement(F,{day:e,key:t})}):n.a.createElement("h4",null,"There is currently no forcast show"),m=this.isCurrentFavorite()?"Remove from Favorites":"Add to Favorites",h=this.isCurrentFavorite()?{color:"red"}:{color:"grey"};return n.a.createElement("div",{className:"container"},n.a.createElement(T,null),n.a.createElement("div",{className:"flex-space-between"},n.a.createElement("div",{className:"flex  "},n.a.createElement("img",{className:"large-image",src:s,title:t,alt:t}),n.a.createElement("div",{className:"flex-col"},n.a.createElement("div",null,i,", ",o),n.a.createElement("div",null,r,a))),n.a.createElement("div",{className:"flex centered"},n.a.createElement("i",{className:"small material-icons",style:h},"favorite"),n.a.createElement("button",{className:"btn toogle-fav blue darken-2",onClick:this.handleToggleFavorite},m))),n.a.createElement("div",{className:"center main-description"},t),n.a.createElement("ul",{className:"forcast-list"},p),n.a.createElement("p",{className:"center blue-text darken-2 secondary-description"},f))}}]),t}(a.Component)),_=Object(d.b)(function(e){return{citiesInfo:e.location.citiesInfo,defaultCityName:e.location.defaultCityName,isFavoritesLoaded:e.location.isFavoritesLoaded,favorites:e.location.favorites,forcast:e.weather.forcast,forcastDescription:e.weather.forcastDescription,currentWeather:e.weather.currentWeather,weatherError:e.weather.error,locationError:e.location.error}},function(e){return{getCityInfo:function(t,r,a){return e(N(t,r,a))},getForcast:function(t){e(function(e){return function(t,r){W(e).then(function(e){t({type:"SET_FORCAST",forcast:e})}).catch(function(e){t({type:"WEATHER_ERROR",error:e})})}}(t))},getWeather:function(t,r){e(S(t,r))},toggleFavoriteStatus:function(t){e(C(t))},loadFavoritesFromStorage:function(){e(function(e,t){var r=b("favorites");r||(r=[]),e({type:"LOAD_FAVORITES_FROM_STORAGE",favorites:r})})}}})(k),A=function(e){var t=e.composedInfo.cityInfo.cityName,r=e.composedInfo.cityInfo.cityId,a=e.composedInfo.cityInfo.countryName,c=e.composedInfo.currentWeather.temperatureImperialUnit,o=e.composedInfo.currentWeather.temperatureImperialVal,s=e.composedInfo.currentWeather.weatherDescription,u=e.composedInfo.currentWeather.weatherIcon;u<10&&(u="0".concat(u));var l="https://apidev.accuweather.com/developers/Media/Default/WeatherIcons/".concat(u,"-s.png");return n.a.createElement(i.b,{to:"/"+r},n.a.createElement("div",{className:"card"},n.a.createElement("div",{className:"card-content"},n.a.createElement("div",null,t,", ",a),n.a.createElement("div",null,o,", ",c),n.a.createElement("img",{src:l,title:s,alt:s}),n.a.createElement("div",null,s))))},M=function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=[];this.props.citiesInfo.length&&this.props.citiesInfo.forEach(function(r){e.props.currentWeather.length&&e.props.currentWeather.forEach(function(e){e.cityId===r.cityId&&r.isFavorite&&t.push({cityInfo:r,currentWeather:e})})});var r=t.length?t.map(function(e,t){return n.a.createElement(A,{composedInfo:e,key:t})}):n.a.createElement("div",{className:""},"No Favorites Selected ");return n.a.createElement("ul",{className:"forcast-list center"},r)}}]),t}(a.Component),U=Object(d.b)(function(e){return{citiesInfo:e.location.citiesInfo,currentWeather:e.weather.currentWeather}})(M),x=function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.favorites&&this.props.favorites.forEach(function(t){var r=e.props.citiesInfo.find(function(e){return e.cityName===t});r?(C(t),e.props.getWeather(r.cityId,r.isCurrent)):e.props.getCityInfo(t,!0,!1)})}},{key:"componentDidUpdate",value:function(e,t){var r=this;this.props.citiesInfo.forEach(function(e){r.props.favorites.find(function(t){return e.cityName===t})&&(r.props.weather&&r.props.weather.currentWeather.find(function(t){return t.cityId===e.cityId})||r.props.getWeather(e.cityId,e.isCurrent))})}},{key:"render",value:function(){return n.a.createElement("div",{className:"container"},n.a.createElement(U,null))}}]),t}(a.Component),L=Object(d.b)(function(e){return{citiesInfo:e.location.citiesInfo,favorites:e.location.favorites,currentWeather:e.location.currentWeather}},function(e){return{getCityInfo:function(t,r,a){return e(N(t,r,a))},getWeather:function(t,r){e(S(t,r))},toggleFavoriteStatus:function(t){e(C(t))}}})(x);var V=function(){return n.a.createElement(i.a,{basename:"/weather-app"},n.a.createElement(R.a,null),n.a.createElement("div",{className:"App"},n.a.createElement(s,null),n.a.createElement(u.c,null,n.a.createElement(u.a,{exact:!0,path:"/",component:_}),n.a.createElement(u.a,{path:"/favorites",component:L}),n.a.createElement(u.a,{path:"/:cityId",component:_}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var G=r(10),Q=r(6),H=r(8),q={favorites:[],isFavoritesLoaded:!1,citiesInfo:[],defaultCityName:"Tel Aviv",error:""},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_FAVORITES_FROM_STORAGE":return Object(H.a)({},e,{isFavoritesLoaded:!0,favorites:t.favorites,error:""});case"SET_CITY_INFO":var r=Object(Q.a)(e.citiesInfo);t.cityInfo.isCurrent&&r.forEach(function(e){return e.isCurrent=!1});var a=r.find(function(e){return e.cityId===t.cityInfo.cityId});return a?(a.isCurrent=t.cityInfo.isCurrent,Object(H.a)({},e,{citiesInfo:Object(Q.a)(r),error:""})):Object(H.a)({},e,{citiesInfo:[].concat(Object(Q.a)(r),[t.cityInfo]),error:""});case"TOGGLE_FAVORITE_STATUS":var n=Object(Q.a)(e.citiesInfo),c=n.find(function(e){return e.cityId===t.cityId});c.isFavorite=!c.isFavorite;var o=Object(Q.a)(e.favorites),i=o.indexOf(c.cityName);return c.isFavorite?i<0&&(o=[].concat(Object(Q.a)(o),[c.cityName])):i>=0&&o.splice(i,1),O("favorites",o),Object(H.a)({},e,{favorites:o,citiesInfo:Object(Q.a)(n),error:""});case"LOCATION_ERROR":return Object(H.a)({},e,{error:t.error});default:return e}},J={forcast:[],forcastDescription:"",currentWeather:[],error:""},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FORCAST":return Object(H.a)({},e,{forcast:t.forcast.DailyForecasts,forcastDescription:t.forcast.Headline.Text,error:""});case"SET_WEATHER":var r=Object(Q.a)(e.currentWeather),a=!1,n=r.map(function(e){return e.cityId===t.weather.cityId?(a=!0,t.weather):e});return a?Object(H.a)({},e,{currentWeather:Object(Q.a)(n),error:""}):Object(H.a)({},e,{currentWeather:[].concat(Object(Q.a)(e.currentWeather),[t.weather]),error:""});case"WEATHER_ERROR":return Object(H.a)({},e,{error:t.error});default:return e}},Y=Object(G.combineReducers)({weather:P,location:B}),Z=r(45),z=r(46),K=Object(G.createStore)(Y,Object(G.compose)(Object(G.applyMiddleware)(Z.a),Object(z.composeWithDevTools)()));o.a.render(n.a.createElement(d.a,{store:K},n.a.createElement(V,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[47,1,2]]]);
//# sourceMappingURL=main.26b83109.chunk.js.map